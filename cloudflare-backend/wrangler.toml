name = "tippen-backend"
main = "src/index.ts"
compatibility_date = "2025-01-16"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "tippen-db"
database_id = "4bce4fdf-e8a2-43f4-8456-366a24cfb0a7"

# Durable Object bindings
[[durable_objects.bindings]]
name = "VISITOR_COORDINATOR"
class_name = "VisitorCoordinator"
script_name = "tippen-backend"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["VisitorCoordinator"]

# Environment variables
[vars]
# Comma-separated list of email addresses that have saas-owner access to workspace switcher
SAAS_OWNERS = "Tippen@dev.com"

# Development environment
[env.dev]
vars = { ENVIRONMENT = "development", SAAS_OWNERS = "Tippen@dev.com" }

# Production environment
[env.production]
vars = { ENVIRONMENT = "production", SAAS_OWNERS = "Tippen@dev.com" }

# Secrets (set via CLI or Cloudflare Dashboard)
# wrangler secret put ENRICH_API_KEY
# wrangler secret put CLEARBIT_API_KEY (deprecated)
